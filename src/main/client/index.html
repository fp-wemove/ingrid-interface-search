<!DOCTYPE html>
<html ng-app="atomClient">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>AtomFeed-Client</title>
    <!-- Typographie, Forms, Glyphicons, Jumbotron, Panels, Wells, Component Animations, Basic Utilities  -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.custom.min.css" />
    <!-- <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/frameworks/bootstrap-responsive.min.css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="css/ng-grid.min.css" />-->
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>
<body>

    <header id="overview" class="jumbotron">
        <img alt="logo" src="img/logo-t.gif">
        <h1 style="display:inline; padding-left:20px; vertical-align: middle;">ATOM-Feed Client</h1>
    </header>

    <!-- show all the different pages of the app here -->
    <div id="templateContainer" class="view-container" ng-controller="AtomCtrl">
        <!-- <div ng-view id="ng-view"></div> -->
        
        <h3>Dienstauswahl</h3>
        <div class="container-fluid">
            <div class="row">
                <select class="form-control" ng-model="selectedFeed" ng-disabled="!feedsLoaded" ng-options="feed.title for feed in feeds" ng-change="showDatasetFeeds()" style="width: 100%;">
                </select>
            </div>
        </div>
        
        
        <p class="well" ng-show="selectedFeed">{{ selectedFeed.summary }} ({{ selectedFeed.date | date: "dd.MM.yyyy" }})</p>
         
        
        <fieldset>
            <legend>Datensätze</legend>
            <p ng-hide="selectedFeed">Kein Service ausgewählt</p>
            <span ng-class="{'hidden': feedsLoaded && subsetsLoaded}"><span class="loader"></span>{{message.loading}}</span>
            <accordion close-others="oneAtATime">
                <accordion-group heading="{{entry.title}}" is-open="isopen" ng-click="loadDownloadsFeed(entry, isopen, $index)" ng-repeat="entry in entries">
                    <accordion-heading>
                        <i class="pull-left glyphicon" ng-class="{'glyphicon-minus-sign': isopen, 'glyphicon-plus-sign': !isopen}"></i>
                        {{entry.title}}
                    </accordion-heading>
                    <div class="loader" ng-class="{'hidden': datasetLoaded[$index]}"></div>
                    <div ng-class="{'hidden': !datasetLoaded[$index]}">
                        <h4>Zusammenfassung</h4>
                        <p>{{entry.summary}}</p>
                        <h4>Datum</h4>
                        <p>{{entry.date | date: "dd.MM.yyyy" }}</p>
                        <h4>Nutzungsbedingungen</h4>
                        <p>{{entry.useConstraints}}</p>
                        <h4>Downloads</h4>
                        <span class="downloadContainer well" ng-repeat="download in entry.downloads">
                            <a class="pull-right" href="{{download.link}}" title="Download"><i class="glyphicon glyphicon-download-alt"></i></a>
                            <label>Format:</label>
                            <p style="width: 130px;">{{download.fileType}}</p>
                            <label>System:</label>
                            <p>{{download.crs}}</p>
                        </span>
                    </div>
                </accordion-group>
            </accordion>
        </fieldset>
    </div>

    <div id="footer"><span>© 2014 wemove GmbH</span></div>

    <!-- DEBUGGING ON MOBILE DEVICES -->
    <!-- <script type="text/javascript" src="http://fbug.googlecode.com/svn/lite/branches/firebug1.4/content/firebug-lite-dev.js"></script> -->

    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/angular-route.min.js"></script>
    <script type="text/javascript" src="js/angular-xml.min.js"></script>
    <!-- Accordion  -->
    <script type="text/javascript" src="js/ui-bootstrap-custom-tpls-0.10.0.min.js"></script>
    <!-- <script type="text/javascript" src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script> -->
    
    <script type="text/javascript" src="js/controllers.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
</body>
</html>
